{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\aleonmer\\\\Desktop\\\\MY - Documents\\\\FRONT-END\\\\ANGULAR\\\\ng-certification\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\aleonmer\\\\Desktop\\\\MY - Documents\\\\FRONT-END\\\\ANGULAR\\\\ng-certification\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { LOCALSTORAGE_NAME } from \"../../../../core/constants/localstorage-name.const\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/wheater.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\n\nvar _c0 = function _c0() {\n  return [\"/forecast\"];\n};\n\nvar _c1 = function _c1(a0, a1, a2) {\n  return {\n    lon: a0,\n    lat: a1,\n    name: a2\n  };\n};\n\nfunction LocationSearchedComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h4\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h4\");\n    i0.ɵɵtext(7, \"Temperatures today:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\");\n    i0.ɵɵelementStart(11, \"a\", 2);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\");\n    i0.ɵɵelementStart(14, \"span\", 3);\n    i0.ɵɵlistener(\"click\", function LocationSearchedComponent_div_0_Template_span_click_14_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r4);\n      var i_r2 = restoredCtx.index;\n      var ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.removeItem(i_r2);\n    });\n    i0.ɵɵtext(15, \"\\xD7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"img\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var city_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", city_r1 == null ? null : city_r1.name, \" (\", city_r1 == null ? null : city_r1.id, \")\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Current conditions: \", city_r1 == null ? null : city_r1.weather[0] == null ? null : city_r1.weather[0].main, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate3(\"Current \", city_r1 == null ? null : city_r1.main == null ? null : city_r1.main.temp, \" - Max \", city_r1 == null ? null : city_r1.main == null ? null : city_r1.main.temp_max, \" - Min \", city_r1 == null ? null : city_r1.main == null ? null : city_r1.main.temp_min, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(10, _c0))(\"queryParams\", i0.ɵɵpureFunction3(11, _c1, city_r1 == null ? null : city_r1.coord == null ? null : city_r1.coord.lon, city_r1 == null ? null : city_r1.coord == null ? null : city_r1.coord.lat, city_r1 == null ? null : city_r1.name));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Show 5-day forecast for \", city_r1 == null ? null : city_r1.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", city_r1 == null ? null : city_r1.imagesWeather, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport var LocationSearchedComponent = /*#__PURE__*/(function () {\n  var LocationSearchedComponent = /*#__PURE__*/function () {\n    function LocationSearchedComponent(weatherService) {\n      _classCallCheck(this, LocationSearchedComponent);\n\n      this.weatherService = weatherService;\n      this.infoZipCode = [];\n    }\n\n    _createClass(LocationSearchedComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.isAnyZipCodeEnter();\n      }\n    }, {\n      key: \"isAnyZipCodeEnter\",\n      value: function isAnyZipCodeEnter() {\n        var _this = this;\n\n        this.weatherService.weather$.subscribe(function (item) {\n          if (item) {\n            if ((item === null || item === void 0 ? void 0 : item.index) >= 0) {\n              //?Respeta siempre el mismo orden en la lista de ciudades\n              _this.infoZipCode[item === null || item === void 0 ? void 0 : item.index] = item;\n            } else {\n              if (_this.getIndexRepeated(item) > -1) {\n                //?Actualiza los datos\n                _this.infoZipCode[_this.getIndexRepeated(item)] = item;\n              } else {\n                _this.infoZipCode.unshift(item);\n              }\n            }\n\n            _this.setLocalStore();\n          }\n        });\n      }\n    }, {\n      key: \"trackByItem\",\n      value: function trackByItem(index, el) {\n        return (el === null || el === void 0 ? void 0 : el.id) || index;\n      }\n    }, {\n      key: \"getIndexRepeated\",\n      value: function getIndexRepeated(item) {\n        console.log(\"%cthis.infoZipCode \", \"color: red; display: block; width: 100%;\", this.infoZipCode);\n        return this.infoZipCode.findIndex(function (cod) {\n          return (item === null || item === void 0 ? void 0 : item.id) === (cod === null || cod === void 0 ? void 0 : cod.id);\n        });\n      }\n    }, {\n      key: \"removeItem\",\n      value: function removeItem(index) {\n        this.infoZipCode.splice(index, 1);\n        this.setLocalStore();\n      }\n    }, {\n      key: \"setLocalStore\",\n      value: function setLocalStore() {\n        localStorage.setItem(LOCALSTORAGE_NAME, JSON.stringify(this.infoZipCode));\n      }\n    }]);\n\n    return LocationSearchedComponent;\n  }();\n\n  LocationSearchedComponent.ɵfac = function LocationSearchedComponent_Factory(t) {\n    return new (t || LocationSearchedComponent)(i0.ɵɵdirectiveInject(i1.WeatherService));\n  };\n\n  LocationSearchedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LocationSearchedComponent,\n    selectors: [[\"app-location-searched\"]],\n    decls: 1,\n    vars: 2,\n    consts: [[\"class\", \"well flex\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"well\", \"flex\"], [3, \"routerLink\", \"queryParams\"], [1, \"close\", 3, \"click\"], [3, \"src\"]],\n    template: function LocationSearchedComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, LocationSearchedComponent_div_0_Template, 17, 15, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngForOf\", ctx.infoZipCode)(\"ngForTrackBy\", ctx.trackByItem);\n      }\n    },\n    directives: [i2.NgForOf, i3.RouterLinkWithHref],\n    styles: [\"\"]\n  });\n  return LocationSearchedComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}